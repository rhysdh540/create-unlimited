ext.set("access_widener_version", minecraft_version.replace(".", "_"))

def accessWidenerFile = project(':common').file('src/main/resources/createunlimited.accesswidener')
def versionAccessWidenerFile = project(':common').file("src/main/resources/${access_widener_version}.createunlimited.aw")

if (accessWidenerFile.exists()) {
	delete accessWidenerFile
}

if (versionAccessWidenerFile.exists()) {
	copy {
		from versionAccessWidenerFile
		into project(':common').file('src/main/resources/')
		rename "${access_widener_version}.createunlimited.aw", 'createunlimited.accesswidener'
	}
	def text = accessWidenerFile.text
	text += "\n# DO NOT EDIT\n# Generated by the build script. Edit ${versionAccessWidenerFile.name} instead!"

	accessWidenerFile.text = text
} else {
	versionAccessWidenerFile.createNewFile()
	versionAccessWidenerFile.text = 'accessWidener   v2  named'
}